<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kumar Travels Form</title>
    <link rel="stylesheet" href="style.css"> <!-- Linking CSS File -->
</head>
<body>

<form id="sheetdb" action="https://sheetdb.io/api/v1/z1ir5g6powleo" method="post">
    <div class="d1">
        <input type="text" name="data[NAME]" id="uname" placeholder="Enter-Name" required><br>
        <input type="text" name="data[MOBILE]" id="umobile" maxlength="10" placeholder="Mobile-Number" required><br>
        <input type="email" name="data[EMAIL]" id="umail" placeholder="Enter-Email" required><br>
        <input type="number" name="data[PERSONS]" id="upersons" placeholder="Num of persons" required><br>
        <input type="date" name="data[DATE]" id="udate" required><br>
        <input id="s1" type="submit" value="SUBMIT">
    </div>
</form>

<p id="message"></p>

<!-- Loader -->
<div id="loader" class="loader-overlay">
    <div class="spinner"></div>
    <p>Submitting...</p>
</div>

<script>
    const form = document.getElementById("sheetdb");
const loader = document.getElementById("loader");
const message = document.getElementById("message");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    let name = document.getElementById("uname").value.trim();
    let mobile = document.getElementById("umobile").value.trim();

    // Validate mobile number
    if (mobile.length !== 10 || !/^[0-9]+$/.test(mobile)) {
        alert("Please enter correct mobile number");
        return;
    }

    // Show loader
    loader.style.display = "flex";

    try {
        await fetch(form.action, {
            method: 'POST',
            body: new FormData(form)
        });

        loader.style.display = "none";

        // Success message
        message.textContent = `✔ Success! Thank you, ${name}. Your form has been submitted.`;
        message.style.color = "green";
        
        form.reset();

    } catch (error) {
        loader.style.display = "none";
        message.textContent = "❌ Something went wrong. Please try again.";
        message.style.color = "red";
    }
});

</script>
</body>
</html>
